# AiBookkeeping 样式指南

## 设计系统概述

AiBookkeeping 采用基于 Bootstrap 5 的现代化设计系统，结合金融应用的专业需求，提供一致、可访问的用户界面。

## CSS 架构

### 文件组织结构

```
app/static/css/
├── design-system.css     # 设计变量和基础样式
├── components.css        # 通用组件样式
├── layout.css           # 布局相关样式
├── utilities.css        # 工具类样式
└── pages/               # 页面特定样式
    ├── dashboard.css
    ├── transactions.css
    ├── expense-analysis.css
    └── settings.css
```

### 加载顺序

CSS 文件按以下顺序加载以确保正确的样式层叠：

1. Bootstrap 5.3.0
2. design-system.css
3. components.css
4. layout.css
5. utilities.css
6. 页面特定CSS

## 设计变量

### 颜色系统

#### 主色调
```css
--bs-primary: #007bff;
--bs-primary-50: rgba(0, 123, 255, 0.05);
--bs-primary-100: rgba(0, 123, 255, 0.1);
--bs-primary-500: #007bff;
--bs-primary-600: #0056b3;
--bs-primary-700: #004085;
```

#### 语义化颜色（金融专用）
```css
--color-amount-positive: var(--bs-success);  /* 收入/正数 */
--color-amount-negative: var(--bs-danger);   /* 支出/负数 */
--color-amount-neutral: var(--bs-gray-600);  /* 中性金额 */
```

#### 数据可视化颜色
```css
--color-chart-primary: #007bff;
--color-chart-secondary: #6c757d;
--color-chart-accent-1: #28a745;
--color-chart-accent-2: #ffc107;
```

### 字体系统

#### 字体族
```css
--bs-font-sans-serif: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
--bs-font-monospace: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
```

#### 字体权重
```css
--font-weight-light: 300;
--font-weight-normal: 400;
--font-weight-medium: 500;
--font-weight-semibold: 600;
--font-weight-bold: 700;
```

#### 字体大小
```css
--font-size-xs: 0.75rem;    /* 12px */
--font-size-sm: 0.875rem;   /* 14px */
--font-size-base: 1rem;     /* 16px */
--font-size-lg: 1.125rem;   /* 18px */
--font-size-xl: 1.25rem;    /* 20px */
--font-size-2xl: 1.5rem;    /* 24px */
--font-size-3xl: 1.875rem;  /* 30px */
--font-size-4xl: 2.25rem;   /* 36px */
```

### 间距系统

```css
--spacing-1: 0.25rem;  /* 4px */
--spacing-2: 0.5rem;   /* 8px */
--spacing-3: 0.75rem;  /* 12px */
--spacing-4: 1rem;     /* 16px */
--spacing-5: 1.25rem;  /* 20px */
--spacing-6: 1.5rem;   /* 24px */
--spacing-8: 2rem;     /* 32px */
--spacing-10: 2.5rem;  /* 40px */
--spacing-12: 3rem;    /* 48px */
--spacing-16: 4rem;    /* 64px */
--spacing-20: 5rem;    /* 80px */
```

### 边框和阴影

#### 边框半径
```css
--bs-border-radius: 8px;
--bs-border-radius-sm: 4px;
--bs-border-radius-lg: 12px;
--bs-border-radius-xl: 16px;
--bs-border-radius-2xl: 24px;
--bs-border-radius-pill: 50rem;
```

#### 阴影系统
```css
--bs-box-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
--bs-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
--bs-box-shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
--bs-box-shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
--bs-box-shadow-2xl: 0 25px 50px rgba(0, 0, 0, 0.15);
```

## 组件样式规范

### 卡片组件

```css
.card {
    background-color: var(--surface-card);
    border: var(--border-width-thin) solid var(--bs-border-color);
    border-radius: var(--bs-border-radius);
    box-shadow: var(--bs-box-shadow-sm);
    transition: var(--bs-transition);
}

.card:hover {
    box-shadow: var(--bs-box-shadow);
}
```

### 按钮组件

```css
.btn {
    border-radius: var(--bs-border-radius);
    font-weight: var(--font-weight-medium);
    transition: var(--bs-transition);
}

.btn:hover {
    transform: translateY(-1px);
    box-shadow: var(--bs-box-shadow);
}
```

### 表格组件

```css
.table th {
    font-weight: var(--font-weight-semibold);
    color: var(--bs-gray-700);
    text-transform: uppercase;
    letter-spacing: 0.025em;
    font-size: var(--font-size-xs);
}
```

## 响应式设计

### 断点系统

遵循 Bootstrap 5 的断点系统：

- `xs`: < 576px（手机）
- `sm`: ≥ 576px（大手机）
- `md`: ≥ 768px（平板）
- `lg`: ≥ 992px（桌面）
- `xl`: ≥ 1200px（大桌面）
- `xxl`: ≥ 1400px（超大桌面）

### 移动端优化

```css
@media (max-width: 768px) {
    .card-body {
        padding: var(--spacing-3) !important;
    }
    
    .btn {
        width: 100%;
        margin-bottom: var(--spacing-2);
    }
}
```

## 工具类

### 间距工具类

```css
.m-0 { margin: 0 !important; }
.p-4 { padding: var(--spacing-4) !important; }
.gap-3 { gap: var(--spacing-3) !important; }
```

### 文本工具类

```css
.fw-medium { font-weight: var(--font-weight-medium) !important; }
.fs-sm { font-size: var(--font-size-sm) !important; }
.text-truncate { /* 文本截断 */ }
```

### 颜色工具类

```css
.text-amount-positive { color: var(--color-amount-positive) !important; }
.text-amount-negative { color: var(--color-amount-negative) !important; }
.bg-primary-50 { background-color: var(--bs-primary-50) !important; }
```

## 无障碍访问

### 颜色对比度

确保文本与背景的对比度符合 WCAG 2.1 AA 标准：
- 正常文本：至少 4.5:1
- 大文本：至少 3:1

### 焦点样式

```css
:focus-visible {
    outline: 2px solid var(--bs-primary);
    outline-offset: 2px;
}
```

### 屏幕阅读器支持

```css
.icon-text {
    position: absolute !important;
    clip: rect(0, 0, 0, 0) !important;
    width: 1px !important;
    height: 1px !important;
    overflow: hidden !important;
}
```

## 编码规范

### 命名约定

1. **BEM 方法论**：`.block__element--modifier`
2. **语义化命名**：使用描述性的类名
3. **一致性**：保持命名风格统一

### CSS 组织

1. **按功能分组**：将相关样式放在一起
2. **注释说明**：为复杂样式添加注释
3. **避免深层嵌套**：最多3层嵌套

### 性能优化

1. **避免重复**：使用CSS变量和工具类
2. **选择器优化**：避免过于复杂的选择器
3. **关键CSS**：优先加载关键样式

## 主题定制

### 自定义颜色主题

```css
:root {
    --bs-primary: #your-color;
    --bs-primary-rgb: r, g, b;
}
```

### 暗色模式支持

```css
@media (prefers-color-scheme: dark) {
    :root {
        --bs-body-bg: #1a1a1a;
        --bs-body-color: #ffffff;
    }
}
```

## 最佳实践

1. **使用设计变量**：优先使用CSS变量而非硬编码值
2. **保持一致性**：遵循既定的设计模式
3. **响应式优先**：考虑所有设备尺寸
4. **性能考虑**：优化CSS大小和加载速度
5. **可维护性**：编写清晰、有组织的代码
6. **测试验证**：在不同浏览器和设备上测试
