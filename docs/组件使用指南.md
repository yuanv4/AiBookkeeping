# AiBookkeeping 组件使用指南

## 概述

本文档介绍 AiBookkeeping 应用中可用的 UI 组件及其使用方法。所有组件都定义在 `app/templates/macros.html` 文件中。

## 基础组件

### 1. 图标组件 (icon)

用于显示 Lucide 图标。

```jinja2
{{ icon("home", "md", "text-primary") }}
```

**参数：**
- `name`: 图标名称（必需）
- `size`: 尺寸 - "xs", "sm", "md", "lg", "xl", "xxl"（默认："md"）
- `color_class`: 颜色类名（可选）
- `extra_classes`: 额外的CSS类（可选）

### 2. 页面头部 (page_header)

统一的页面头部组件。

```jinja2
{{ page_header("仪表盘", "现金流概览", "layout-dashboard") }}
```

**参数：**
- `title`: 页面标题（必需）
- `subtitle`: 副标题（可选）
- `icon_name`: 图标名称（可选）

### 3. 卡片组件 (card)

通用卡片容器。

```jinja2
{% call card("标题", "icon-name", "border-primary") %}
    卡片内容
{% endcall %}
```

**参数：**
- `title`: 卡片标题（必需）
- `icon_name`: 图标名称（可选）
- `extra_classes`: 额外的CSS类（可选）

## 数据展示组件

### 4. 数据卡片 (data_card)

用于展示关键数据指标。

```jinja2
{{ data_card("总收入", "¥12,345", "trending-up", "up", "+5.2%", "success", "md", true, "showDetails()") }}
```

**参数：**
- `title`: 标题（必需）
- `value`: 数值（必需）
- `icon_name`: 图标名称（可选）
- `trend`: 趋势方向 - "up", "down", "neutral"（可选）
- `trend_value`: 趋势数值（可选）
- `color`: 颜色主题（默认："primary"）
- `size`: 尺寸 - "sm", "md", "lg"（默认："md"）
- `clickable`: 是否可点击（默认：false）
- `onclick`: 点击事件（可选）

### 5. 统计卡片 (stat_card)

增强版统计卡片。

```jinja2
{{ stat_card("wallet", "¥8,888", "当前余额", "primary", "success", "balance-value", "", "", "up", "+12%", true, "showBalance()") }}
```

**参数：**
- `icon_name`: 图标名称（必需）
- `value`: 数值（必需）
- `label`: 标签（必需）
- `icon_color`: 图标颜色（默认："primary"）
- `value_color`: 数值颜色（可选）
- `value_id`: 数值元素ID（可选）
- `change_text`: 变化文本（可选）
- `change_id`: 变化元素ID（可选）
- `trend`: 趋势方向（可选）
- `trend_value`: 趋势数值（可选）
- `clickable`: 是否可点击（默认：false）
- `onclick`: 点击事件（可选）

### 6. 数据表格 (data_table)

功能丰富的数据表格。

```jinja2
{{ data_table("transactions-table", ["日期", "描述", "金额"], "交易记录", 100, 50, "没有交易记录", true, true, true, "receipt") }}
```

**参数：**
- `id`: 表格ID（必需）
- `headers`: 表头数组（必需）
- `title`: 表格标题（默认："数据明细"）
- `total`: 总记录数（默认：0）
- `filtered`: 筛选后记录数（默认：0）
- `no_data_message`: 空数据提示（默认："没有找到匹配的记录"）
- `show_pagination`: 显示分页（默认：true）
- `show_export`: 显示导出（默认：false）
- `sortable`: 支持排序（默认：true）
- `icon_name`: 图标名称（默认："receipt"）

## 交互组件

### 7. 筛选栏 (filter_bar)

多功能筛选条件栏。

```jinja2
{{ filter_bar([
    {"label": "类型", "type": "select", "id": "type-filter", "options": [{"value": "income", "label": "收入"}, {"value": "expense", "label": "支出"}]},
    {"label": "日期范围", "type": "daterange", "id": "date-filter"}
], "搜索交易...", true, [{"type": "excel", "label": "Excel", "icon": "file-spreadsheet"}]) }}
```

### 8. 分页组件 (pagination_component)

完整的分页控件。

```jinja2
{{ pagination_component(1, 10, 20, 200, [10, 20, 50, 100]) }}
```

### 9. 模态框 (modal)

可配置的模态对话框。

```jinja2
{% call modal("confirm-modal", "确认操作", "lg", true, false, true) %}
    确认要执行此操作吗？
{% endcall %}
```

## 状态组件

### 10. 加载状态 (loading_state)

加载指示器。

```jinja2
{{ loading_state("正在加载数据...", "md", "primary", false) }}
```

### 11. 空状态 (empty_state)

空数据状态。

```jinja2
{{ empty_state("没有找到交易记录", "search-x", "添加交易", "/transactions/add", "") }}
```

### 12. 通知横幅 (alert_banner)

消息通知组件。

```jinja2
{{ alert_banner("操作成功完成", "success", true, "check-circle") }}
```

## 导航组件

### 13. 面包屑 (breadcrumb)

面包屑导航。

```jinja2
{{ breadcrumb([
    {"label": "首页", "url": "/"},
    {"label": "交易记录", "url": "/transactions"},
    {"label": "详情"}
]) }}
```

## 图表组件

### 14. 图表容器 (chart_container)

图表包装容器。

```jinja2
{{ chart_container("月度趋势", "trend-chart", "350px", "trending-up", true, true, true) }}
```

## 文件上传组件

### 15. 文件上传器 (file_uploader)

文件上传组件。

```jinja2
{{ file_uploader("csv-upload", "上传CSV文件", ["csv"], "选择CSV文件或拖拽到此处", 10) }}
```

## 商户卡片组件

### 16. 商户卡片 (merchant_card)

专用于商户信息展示。

```jinja2
{{ merchant_card("超市", "store", "¥1,234", "85", "本月消费较多", "success") }}
```

## 使用最佳实践

1. **一致性**: 在同类功能中使用相同的组件和参数
2. **可访问性**: 确保提供适当的aria标签和键盘导航支持
3. **响应式**: 组件会自动适配不同屏幕尺寸
4. **性能**: 避免在循环中使用复杂组件，考虑使用简化版本
5. **主题**: 使用统一的颜色主题（primary, success, warning, danger等）

## 自定义样式

所有组件的样式都定义在以下CSS文件中：
- `design-system.css`: 设计变量和基础样式
- `components.css`: 组件特定样式
- `layout.css`: 布局相关样式
- `utilities.css`: 工具类样式

可以通过CSS变量来自定义主题颜色和尺寸。
